{"ast":null,"code":"import { FormBuilder, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { Subject, takeUntil } from 'rxjs';\nimport { AuthService } from '../services/auth.service';\nimport { NotificationService } from '../services/notification.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../services/auth.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../services/notification.service\";\nimport * as i5 from \"@angular/common\";\nfunction LoginComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.submissionState.lastError, \" \");\n  }\n}\nfunction LoginComponent_div_9_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Required field\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_9_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Invalid email format\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtemplate(1, LoginComponent_div_9_span_1_Template, 2, 0, \"span\", 16)(2, LoginComponent_div_9_span_2_Template, 2, 0, \"span\", 16);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.credential == null ? null : ctx_r0.credential.errors == null ? null : ctx_r0.credential.errors[\"required\"]);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.credential == null ? null : ctx_r0.credential.errors == null ? null : ctx_r0.credential.errors[\"email\"]);\n  }\n}\nfunction LoginComponent_div_14_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Required field\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_14_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Minimum 6 characters\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtemplate(1, LoginComponent_div_14_span_1_Template, 2, 0, \"span\", 16)(2, LoginComponent_div_14_span_2_Template, 2, 0, \"span\", 16);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.secret == null ? null : ctx_r0.secret.errors == null ? null : ctx_r0.secret.errors[\"required\"]);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.secret == null ? null : ctx_r0.secret.errors == null ? null : ctx_r0.secret.errors[\"minlength\"]);\n  }\n}\nfunction LoginComponent_span_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 17);\n  }\n}\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    formBuilder;\n    authService;\n    router;\n    notificationService;\n    loginForm;\n    destroy$ = new Subject();\n    submissionState = {\n      loading: false,\n      error: '',\n      processing: false,\n      lastError: ''\n    };\n    constructor(formBuilder, authService, router, notificationService) {\n      this.formBuilder = formBuilder;\n      this.authService = authService;\n      this.router = router;\n      this.notificationService = notificationService;\n      this.loginForm = this.formBuilder.group({\n        credential: ['', [Validators.required, Validators.email]],\n        secret: ['', [Validators.required, Validators.minLength(6)]]\n      });\n    }\n    initiateAuth() {\n      this.handleLogin();\n    }\n    get credential() {\n      return this.loginForm.get('credential');\n    }\n    get secret() {\n      return this.loginForm.get('secret');\n    }\n    handleLogin() {\n      if (this.loginForm.invalid) return;\n      this.submissionState.processing = true;\n      this.submissionState.error = '';\n      const credentials = {\n        email: this.loginForm.value.credential.trim().toLowerCase(),\n        password: this.loginForm.value.secret\n      };\n      this.authService.login(credentials).pipe(takeUntil(this.destroy$)).subscribe({\n        next: () => {\n          // Notify the user of a successful login\n          this.notificationService.showNotification('success', 'Logged in successfully!');\n          this.handleNavigation();\n        },\n        error: err => {\n          this.notificationService.showNotification('error', 'Authentication failed. Please check your credentials.');\n          this.handleError(err);\n        }\n      });\n    }\n    handleNavigation() {\n      this.submissionState.processing = false;\n      const returnUrl = this.router.url.includes('login') ? '/' : this.router.url;\n      this.router.navigateByUrl(returnUrl);\n    }\n    handleError(error) {\n      this.submissionState.processing = false;\n      this.submissionState.error = error.error?.message || 'Authentication failed. Please check your credentials.';\n      this.loginForm.get('secret')?.reset();\n    }\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n    static ɵfac = function LoginComponent_Factory(t) {\n      return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.NotificationService));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LoginComponent,\n      selectors: [[\"app-access-panel\"]],\n      decls: 23,\n      vars: 6,\n      consts: [[1, \"login-container\"], [1, \"panel-title\"], [\"class\", \"error-alert\", 4, \"ngIf\"], [3, \"ngSubmit\", \"formGroup\"], [1, \"form-group\"], [\"for\", \"credentialField\", 1, \"form-label\"], [\"type\", \"email\", \"id\", \"credentialField\", \"formControlName\", \"credential\", \"placeholder\", \"Enter email\"], [\"class\", \"validation-hint\", 4, \"ngIf\"], [\"for\", \"secretField\", 1, \"form-label\"], [\"type\", \"password\", \"id\", \"secretField\", \"formControlName\", \"secret\", \"placeholder\", \"Password\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"w-100\", \"mb-3\", 3, \"disabled\"], [\"class\", \"spinner\", 4, \"ngIf\"], [1, \"panel-footer\"], [\"routerLink\", \"/registration\", 1, \"nav-link\"], [1, \"error-alert\"], [1, \"validation-hint\"], [4, \"ngIf\"], [1, \"spinner\"]],\n      template: function LoginComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\", 1);\n          i0.ɵɵtext(2, \"Login\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(3, LoginComponent_div_3_Template, 2, 1, \"div\", 2);\n          i0.ɵɵelementStart(4, \"form\", 3);\n          i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_4_listener() {\n            return ctx.initiateAuth();\n          });\n          i0.ɵɵelementStart(5, \"div\", 4)(6, \"label\", 5);\n          i0.ɵɵtext(7, \"Email Address\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(8, \"input\", 6);\n          i0.ɵɵtemplate(9, LoginComponent_div_9_Template, 3, 2, \"div\", 7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"div\", 4)(11, \"label\", 8);\n          i0.ɵɵtext(12, \"Password\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(13, \"input\", 9);\n          i0.ɵɵtemplate(14, LoginComponent_div_14_Template, 3, 2, \"div\", 7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"button\", 10);\n          i0.ɵɵtemplate(16, LoginComponent_span_16_Template, 1, 0, \"span\", 11);\n          i0.ɵɵtext(17, \" Grant Access \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(18, \"div\", 12)(19, \"span\");\n          i0.ɵɵtext(20, \"Dont have an account yet? \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(21, \"a\", 13);\n          i0.ɵɵtext(22, \"Create Account\");\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.submissionState.lastError);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"formGroup\", ctx.loginForm);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", (ctx.credential == null ? null : ctx.credential.invalid) && ((ctx.credential == null ? null : ctx.credential.dirty) || (ctx.credential == null ? null : ctx.credential.touched)));\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", (ctx.secret == null ? null : ctx.secret.invalid) && ((ctx.secret == null ? null : ctx.secret.dirty) || (ctx.secret == null ? null : ctx.secret.touched)));\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"disabled\", ctx.submissionState.processing);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.submissionState.processing);\n        }\n      },\n      dependencies: [i5.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i3.RouterLink],\n      styles: [\".login-container[_ngcontent-%COMP%]{max-width:400px;margin:2rem auto;padding:2rem;background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a}.login-container[_ngcontent-%COMP%]   .panel-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem;color:#205375;font-weight:700;font-size:1.5rem}.login-container[_ngcontent-%COMP%]   .error-alert[_ngcontent-%COMP%]{background-color:#f8d7da;border:1px solid #f5c6cb;color:#721c24;border-radius:4px;padding:.75rem 1.25rem;margin-bottom:1rem}.login-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.login-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:#2c3e50}.login-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.8rem;border:2px solid #dee2e6;border-radius:6px;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.login-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#205375;box-shadow:0 0 0 .25rem #20537540;outline:none}.login-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#bdc3c7}.login-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .validation-hint[_ngcontent-%COMP%]{color:#dc3545;font-size:.85rem;margin-top:.5rem}.login-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{width:100%;padding:.75rem;background-color:#205375;border:none;transition:background-color .3s ease}.login-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:#15374d}.login-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{background-color:#6c757d;opacity:.65;cursor:not-allowed}.login-container[_ngcontent-%COMP%]   .panel-footer[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem;color:#7f8c8d}.login-container[_ngcontent-%COMP%]   .panel-footer[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#205375;text-decoration:none;font-weight:500}.login-container[_ngcontent-%COMP%]   .panel-footer[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{text-decoration:underline}\"]\n    });\n  }\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}