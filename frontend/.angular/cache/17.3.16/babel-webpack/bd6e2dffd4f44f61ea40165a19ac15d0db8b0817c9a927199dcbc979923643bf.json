{"ast":null,"code":"import { ArtistService } from '../services/artist.service';\nimport { Subject, interval, takeUntil } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/artist.service\";\nimport * as i2 from \"@angular/common\";\nfunction FavoriteComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵelement(1, \"div\", 6);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction FavoriteComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.state.errorMessage, \" \");\n  }\n}\nfunction FavoriteComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"p\");\n    i0.ɵɵtext(2, \"No favorite artists\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction FavoriteComponent_div_4_div_1_ng_container_6_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r3 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(item_r3.birthday);\n  }\n}\nfunction FavoriteComponent_div_4_div_1_ng_container_6_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r3 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \\u2013 \", item_r3.deathday, \"\");\n  }\n}\nfunction FavoriteComponent_div_4_div_1_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, FavoriteComponent_div_4_div_1_ng_container_6_span_1_Template, 2, 1, \"span\", 16)(2, FavoriteComponent_div_4_div_1_ng_container_6_span_2_Template, 2, 1, \"span\", 16);\n    i0.ɵɵelement(3, \"br\");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const item_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", item_r3.birthday);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", item_r3.deathday);\n  }\n}\nfunction FavoriteComponent_div_4_div_1_span_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(item_r3.nationality);\n  }\n}\nfunction FavoriteComponent_div_4_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 11);\n    i0.ɵɵelement(1, \"div\", 12);\n    i0.ɵɵelementStart(2, \"div\", 13)(3, \"h3\", 14);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 15);\n    i0.ɵɵtemplate(6, FavoriteComponent_div_4_div_1_ng_container_6_Template, 4, 2, \"ng-container\", 16)(7, FavoriteComponent_div_4_div_1_span_7_Template, 2, 1, \"span\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\", 17);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function FavoriteComponent_div_4_div_1_Template_button_click_10_listener() {\n      const item_r3 = i0.ɵɵrestoreView(_r2).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.removeFromCollection(item_r3.identifier));\n    });\n    i0.ɵɵtext(11, \" Remove \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const item_r3 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵstyleProp(\"background-image\", \"url(\" + (item_r3.thumbnailUrl || \"assets/default-artist.svg\") + \")\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(item_r3.displayName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", item_r3.birthday || item_r3.deathday);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", item_r3.nationality);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.calculateTimeDifference(item_r3.timestamp), \" \");\n  }\n}\nfunction FavoriteComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵtemplate(1, FavoriteComponent_div_4_div_1_Template, 12, 6, \"div\", 10);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.state.collectionItems);\n  }\n}\nexport let FavoriteComponent = /*#__PURE__*/(() => {\n  class FavoriteComponent {\n    artistService;\n    destroy$ = new Subject();\n    state = {\n      isLoading: true,\n      collectionItems: [],\n      errorMessage: '',\n      hasItems: false\n    };\n    constructor(artistService) {\n      this.artistService = artistService;\n    }\n    ngOnInit() {\n      this.initializeCollection();\n      this.setupTimeUpdates();\n    }\n    initializeCollection() {\n      this.artistService.getFavorites().subscribe({\n        next: items => this.handleCollectionResponse(items),\n        error: err => this.handleCollectionError(err)\n      });\n    }\n    handleCollectionResponse(items) {\n      this.state = {\n        ...this.state,\n        isLoading: false,\n        collectionItems: this.processCollectionItems(items),\n        hasItems: items.length > 0\n      };\n    }\n    processCollectionItems(items) {\n      return items.map(item => ({\n        identifier: item.artistId,\n        displayName: item.name,\n        birthday: item.birthday,\n        deathday: item.deathday,\n        nationality: item.nationality,\n        timestamp: new Date(item.addedAt).getTime(),\n        thumbnailUrl: item.thumbnail ? item.thumbnail : 'assets/artsy_logo.svg'\n      })).sort((a, b) => b.timestamp - a.timestamp);\n    }\n    handleCollectionError(error) {\n      this.state = {\n        ...this.state,\n        isLoading: false,\n        errorMessage: 'Failed to load collection',\n        hasItems: false\n      };\n      console.error('Collection error:', error);\n    }\n    removeFromCollection(itemId) {\n      this.artistService.removeFavorite(itemId).subscribe({\n        next: () => this.updateLocalCollection(itemId),\n        error: err => this.state.errorMessage = 'Removal failed'\n      });\n    }\n    updateLocalCollection(itemId) {\n      this.state.collectionItems = this.state.collectionItems.filter(item => item.identifier !== itemId);\n      this.state.hasItems = this.state.collectionItems.length > 0;\n    }\n    calculateTimeDifference(timestamp) {\n      const currentTime = Date.now();\n      const diffSeconds = Math.floor((currentTime - timestamp) / 1000);\n      const timeUnits = [{\n        unit: 'year',\n        seconds: 31536000\n      }, {\n        unit: 'month',\n        seconds: 2592000\n      }, {\n        unit: 'day',\n        seconds: 86400\n      }, {\n        unit: 'hour',\n        seconds: 3600\n      }, {\n        unit: 'minute',\n        seconds: 60\n      }];\n      for (const {\n        unit,\n        seconds\n      } of timeUnits) {\n        const count = Math.floor(diffSeconds / seconds);\n        if (count >= 1) {\n          return `${count} ${unit}${count > 1 ? 's' : ''} ago`;\n        }\n      }\n      return `${diffSeconds} second${diffSeconds !== 1 ? 's' : ''} ago`;\n    }\n    setupTimeUpdates() {\n      interval(1000).pipe(takeUntil(this.destroy$)).subscribe(() => {\n        this.state.collectionItems = [...this.state.collectionItems];\n      });\n    }\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n    static ɵfac = function FavoriteComponent_Factory(t) {\n      return new (t || FavoriteComponent)(i0.ɵɵdirectiveInject(i1.ArtistService));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: FavoriteComponent,\n      selectors: [[\"app-favorite\"]],\n      decls: 5,\n      vars: 4,\n      consts: [[1, \"collection-container\"], [\"class\", \"loading-overlay\", 4, \"ngIf\"], [\"class\", \"error-alert\", 4, \"ngIf\"], [\"class\", \"empty-state\", 4, \"ngIf\"], [\"class\", \"collection-grid\", 4, \"ngIf\"], [1, \"loading-overlay\"], [1, \"loading-spinner\"], [1, \"error-alert\"], [1, \"empty-state\"], [1, \"collection-grid\"], [\"class\", \"collection-card\", 4, \"ngFor\", \"ngForOf\"], [1, \"collection-card\"], [1, \"card-media\"], [1, \"card-overlay\"], [1, \"item-title\"], [1, \"item-subtitle\"], [4, \"ngIf\"], [1, \"item-timestamp\"], [1, \"remove-button\", 3, \"click\"]],\n      template: function FavoriteComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0);\n          i0.ɵɵtemplate(1, FavoriteComponent_div_1_Template, 2, 0, \"div\", 1)(2, FavoriteComponent_div_2_Template, 2, 1, \"div\", 2)(3, FavoriteComponent_div_3_Template, 3, 0, \"div\", 3)(4, FavoriteComponent_div_4_Template, 2, 1, \"div\", 4);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.state.isLoading);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.state.errorMessage);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.state.hasItems && !ctx.state.isLoading);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.state.hasItems);\n        }\n      },\n      dependencies: [i2.NgForOf, i2.NgIf],\n      styles: [\".collection-container[_ngcontent-%COMP%]{max-width:1200px;margin:2rem auto;padding:0 1rem;position:relative;min-height:60vh}.collection-container[_ngcontent-%COMP%]   .loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#ffffffe6;display:flex;align-items:center;justify-content:center;z-index:100}.collection-container[_ngcontent-%COMP%]   .loading-overlay[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #2c3e50;border-radius:50%;border-top-color:transparent;animation:_ngcontent-%COMP%_spin 1s linear infinite}.collection-container[_ngcontent-%COMP%]   .error-alert[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:1rem;border-radius:4px;margin:1rem 0;text-align:center}.collection-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{background-color:#fff3cd;color:#664d03;border:1px solid #ffecb5;font-size:1.25rem;line-height:1.5;padding:.75rem 1.25rem;border-radius:.375rem;margin:1.5rem 0 1rem;width:100%}.collection-container[_ngcontent-%COMP%]   .collection-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:1.5rem;padding:1rem 0}.collection-container[_ngcontent-%COMP%]   .collection-grid[_ngcontent-%COMP%]   .collection-card[_ngcontent-%COMP%]{position:relative;border-radius:8px;overflow:hidden;height:250px;box-shadow:0 2px 8px #0000001a;transition:transform .2s ease}.collection-container[_ngcontent-%COMP%]   .collection-grid[_ngcontent-%COMP%]   .collection-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.collection-container[_ngcontent-%COMP%]   .collection-grid[_ngcontent-%COMP%]   .collection-card[_ngcontent-%COMP%]   .card-media[_ngcontent-%COMP%]{position:absolute;inset:0;background-size:cover;background-position:center;filter:blur(6px);z-index:1}.collection-container[_ngcontent-%COMP%]   .collection-grid[_ngcontent-%COMP%]   .collection-card[_ngcontent-%COMP%]   .card-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:2;display:flex;flex-direction:column;justify-content:flex-end;padding:1rem;background:#0000004d;color:#fff}.collection-container[_ngcontent-%COMP%]   .collection-grid[_ngcontent-%COMP%]   .collection-card[_ngcontent-%COMP%]   .card-overlay[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:1.2rem;font-weight:600}.collection-container[_ngcontent-%COMP%]   .collection-grid[_ngcontent-%COMP%]   .collection-card[_ngcontent-%COMP%]   .card-overlay[_ngcontent-%COMP%]   .item-subtitle[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:.95rem;line-height:1.3}.collection-container[_ngcontent-%COMP%]   .collection-grid[_ngcontent-%COMP%]   .collection-card[_ngcontent-%COMP%]   .card-overlay[_ngcontent-%COMP%]   .item-timestamp[_ngcontent-%COMP%]{font-size:.85rem;margin-bottom:.75rem}.collection-container[_ngcontent-%COMP%]   .collection-grid[_ngcontent-%COMP%]   .collection-card[_ngcontent-%COMP%]   .card-overlay[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]{align-self:flex-end;background:#e74c3c;color:#fff;border:none;padding:.5rem 1rem;border-radius:4px;cursor:pointer;transition:opacity .2s}.collection-container[_ngcontent-%COMP%]   .collection-grid[_ngcontent-%COMP%]   .collection-card[_ngcontent-%COMP%]   .card-overlay[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]:hover{opacity:.9}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}\"]\n    });\n  }\n  return FavoriteComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}